/*! jQuery.outline 0.12.0 - //larsjung.de/fracs - MIT License */
!function(t,e){"use strict";var i=e(t),n=e.extend,o=e.fracs,r=o.Rect,s=o.Viewport,l={crop:!1,duration:0,focusWidth:.5,focusHeight:.5,autoFocus:!0,styles:[{selector:"header,footer,section,article",fillStyle:"rgb(230,230,230)"},{selector:"h1,h2,h3,h4",fillStyle:"rgb(255,144,55)"}],viewportStyle:{fillStyle:"rgba(255,144,55,0.3)"},viewportDragStyle:{fillStyle:"rgba(255,144,55,0.5)"},invertViewport:!1},h=function(o,h,c){if(!o||!e.isFunction(o.getContext))return null;var a=o.getContext("2d");if(!a)return null;c=c||t;var u,f,d,p,v,g=n({},l,h),w=e(o),m=w.attr("width"),b=w.attr("height"),y=e(c),T=new s(c),E=c===t?function(t){return e(t)}:function(t){return y.find(t)},k=!1,S=function(t,e,i,n,o){t&&(i||n)&&(n&&(a.beginPath(),o?(a.rect(0,0,u.width,t.top),a.rect(0,t.top,t.left,t.height),a.rect(t.right,t.top,u.width-t.right,t.height),a.rect(0,t.bottom,u.width,u.height-t.bottom)):a.rect(t.left,t.top,t.width,t.height),a.fillStyle=n,a.fill()),i&&(a.beginPath(),a.rect(t.left,t.top,t.width,t.height),a.lineWidth=d?Math.max(e,.2/d):e,a.strokeStyle=i,a.stroke()))},V=function(t,i,n,o){var s=e(t),l=r.ofElement(t);!l||l.width<=0||l.height<=0||"hidden"===s.css("visibility")||(l=l.relativeTo(u),i="auto"===i?parseInt(s.css("border-top-width"),10):i,n="auto"===n?s.css("border-top-color"):n,o="auto"===o?s.css("background-color"):o,S(l,i,n,o))},x=function(){e.each(g.styles,function(t,e){E(e.selector).each(function(){V(this,e.strokeWidth,e.strokeStyle,e.fillStyle)})})},C=function(){var t=k&&g.viewportDragStyle?g.viewportDragStyle:g.viewportStyle;S(f,t.strokeWidth,t.strokeStyle,t.fillStyle,g.invertViewport)},L=function(){u=r.ofContent(c),f=r.ofViewport(c,!0),d=Math.min(m/u.width,b/u.height),g.crop&&w.attr("width",u.width*d).attr("height",u.height*d),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,w.width(),w.height()),a.scale(d,d),x(),C()},N=function(t){var e=r.ofElement(o),i=(t.pageX-e.left)/d-f.width*p,n=(t.pageY-e.top)/d-f.height*v;T.scrollTo(i,n,g.duration)},M=function(t){k=!1,t.preventDefault(),w.css("cursor","pointer").removeClass("dragOn"),e("body").css("cursor","auto"),i.off("mousemove",N),L()},q=function(t){var n;g.autoFocus&&(n=r.ofElement(o),p=((t.pageX-n.left)/d-f.left)/f.width,v=((t.pageY-n.top)/d-f.top)/f.height),(!g.autoFocus||0>p||p>1||0>v||v>1)&&(p=g.focusWidth,v=g.focusHeight),k=!0,t.preventDefault(),w.css("cursor","crosshair").addClass("dragOn"),e("body").css("cursor","crosshair"),i.on("mousemove",N).one("mouseup",M),N(t)},H=function(){w.css("cursor","pointer").mousedown(q),y.on("load resize scroll",L),L()};H(),this.redraw=L},c="fracs.outline";o.modplug({statics:{Outline:h},methods:{outline:function(t,i,n){return"string"!=typeof t&&(n=i,i=t,t=null),n instanceof e&&(n=n[0]),"redraw"===t?this.each(function(){var t=e(this).data(c);t&&t.redraw()}):this.each(function(){var t=e(this).data(c);t||(t=new h(this,i,n),t&&e(this).data(c,t))})}}})}(window,jQuery);